from flask import Flask, render_template, request, jsonify
from flask_cors import CORS
from flask_sslify import SSLify
import learning_utils
import image_analyzer as ia
import trainer as tr
import trainer2 as tr2
import base64
import database

from PIL import Image
from io import BytesIO
from codecs import encode
import numpy as np
import cv2
app = Flask(__name__)
CORS(app)

@app.route('/')
def index():
    analyzer_respnse = ia.analyzer('static/img/img4.jpg')
    feature = learning_utils.Feature(analyzer_respnse[0],analyzer_respnse[1])
    feututeOutput = feature.getFeature()
    className = str( tr.classify(feututeOutput)).replace("[\'","").replace("\']","")
    #text1 = str(cout_of_co)
    database.writeRecortToDatabase("Tekst to writepythone ")
    return render_template("index.html",count_of_el=feututeOutput[0],percent = str(analyzer_respnse[1]) ,ai_raport = className)

@app.route('/open_settings')
def open_settings():
    return render_template("settings.html")


@app.route('/learn')
def learn():
    tr.createDatasetfromImages()
    return index()

@app.route('/learn2')
def learn2():
    tr2.lerning()
    return index()
@app.route('/upload', methods=['POST'])
def upload():
    if 'uploaded_image' in request.files:
        image_file = request.files['uploaded_image']
        if image_file.filename != '':
            image_file.save('static/img/img4.jpg')
        return index()
    if 'file' in request.files:
        image_file = request.files['uploaded_image']
        if image_file.filename != '':
            image_file.save('static/img/img4.jpg')
        return jsonify({ 'message': 'File uploaded successfully'})

@app.route('/upload_mobile', methods=['POST'])
def obsluz_post():
    if request.method == 'POST':
        try:
            dane = request.get_data(as_text=True)
            dane = dane.replace('\n','')

            # Dodanie paddingu
            missing_padding = len(dane) % 4
            dane += '=' * (4 - missing_padding)
            dane = "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"

            print("Otrzymane dane:", dane)
            dane_decoded = base64.b64decode(dane)
            with open("imageToSave.jpg", "wb") as fh:
                fh.write(dane_decoded)

            response = { 'message': 'Dane odebrane poprawnie'}
            return jsonify(response)

        except Exception as e:
            print("Błąd podczas obsługi żądania POST:", str(e))
            response = { 'message': 'Błąd podczas obsługi żądania'}
            return jsonify(response)




if __name__ == "__main__":
    #app.run(ssl_context='adhoc', host='0.0.0.0',debug=True)
    app.run( host='0.0.0.0',debug=True)
